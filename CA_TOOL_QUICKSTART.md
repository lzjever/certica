# CAå·¥å…·å¿«é€Ÿå¼€å§‹æŒ‡å—

## å®‰è£…ä¾èµ–

```bash
pip install click rich
```

æˆ–è€…ï¼š

```bash
pip install -r requirements.txt
```

## å¿«é€Ÿä½¿ç”¨

### æ–¹å¼1: äº¤äº’å¼ç•Œé¢ï¼ˆæ¨èæ–°æ‰‹ï¼‰âœ¨

```bash
certica
```

ç„¶åæŒ‰ç…§èœå•æç¤ºæ“ä½œå³å¯ã€‚ç•Œé¢ç‰¹ç‚¹ï¼š
- ğŸ¨ ç¾è§‚çš„å›¾å½¢ç•Œé¢
- ğŸ”’ æ¸…æ™°çš„èœå•é€‰é¡¹ï¼ˆå¸¦emojiå›¾æ ‡ï¼‰
- ğŸ“‹ æ ¼å¼åŒ–çš„è¡¨æ ¼æ˜¾ç¤º
- ğŸ–¥ï¸ è‡ªåŠ¨è¯†åˆ«è¯ä¹¦ç±»å‹

**èœå•é€‰é¡¹ï¼š**
- `0` âŒ é€€å‡º
- `1` ğŸ” åˆ›å»ºæ ¹CAè¯ä¹¦
- `2` ğŸ“œ ç­¾å‘è¯ä¹¦ï¼ˆæœåŠ¡å™¨/å®¢æˆ·ç«¯ï¼‰
- `3` ğŸ“‹ åˆ—å‡ºæ‰€æœ‰CAè¯ä¹¦
- `4` ğŸ“‘ åˆ—å‡ºå·²ç­¾å‘çš„è¯ä¹¦ï¼ˆæŒ‰CAç­›é€‰ï¼‰
- `5` ğŸ“ ç®¡ç†æ¨¡æ¿æ–‡ä»¶
- `6` ğŸ”§ å®‰è£…CAè¯ä¹¦åˆ°ç³»ç»Ÿ
- `7` ğŸ—‘ï¸ ä»ç³»ç»Ÿç§»é™¤CAè¯ä¹¦

### æ–¹å¼2: å‘½ä»¤è¡Œï¼ˆé€‚åˆè„šæœ¬å’Œè‡ªåŠ¨åŒ–ï¼‰

#### åˆ›å»ºæ ¹CA
```bash
certica create-ca --name myca
```

#### ç­¾å‘æœåŠ¡å™¨è¯ä¹¦ï¼ˆç”¨äºnginxç­‰ï¼‰
```bash
certica sign --ca myca --name nginx \
    --type server --dns localhost --dns example.com --ip 127.0.0.1
```

#### ç­¾å‘å®¢æˆ·ç«¯è¯ä¹¦ï¼ˆç”¨äºetcdå®¢æˆ·ç«¯ç­‰ï¼‰
```bash
certica sign --ca myca --name client1 --type client
```

#### æŸ¥çœ‹æ‰€æœ‰CA
```bash
certica list-cas
```

#### æŸ¥çœ‹æ‰€æœ‰è¯ä¹¦
```bash
certica list-certs
```

#### æŸ¥çœ‹ç‰¹å®šCAçš„è¯ä¹¦
```bash
certica list-certs --ca myca
```

#### å®‰è£…CAåˆ°ç³»ç»Ÿï¼ˆéœ€è¦sudoï¼‰
```bash
sudo certica install --ca myca
```

## å¸¸ç”¨åœºæ™¯

### åœºæ™¯1: ä¸ºæœ¬åœ°nginxåˆ›å»ºè¯ä¹¦

```bash
# 1. åˆ›å»ºCA
certica create-ca --name local-ca

# 2. ç­¾å‘è¯ä¹¦
certica sign --ca local-ca --name nginx \
    --type server --dns localhost --ip 127.0.0.1

# 3. å®‰è£…CAåˆ°ç³»ç»Ÿï¼ˆè¿™æ ·æµè§ˆå™¨ä¸ä¼šæŠ¥é”™ï¼‰
sudo certica install --ca local-ca

# 4. åœ¨nginxé…ç½®ä¸­ä½¿ç”¨
# ssl_certificate output/certs/local-ca/nginx/cert.pem;
# ssl_certificate_key output/certs/local-ca/nginx/key.pem;
```

### åœºæ™¯2: ä¸ºetcdåˆ›å»ºè¯ä¹¦

```bash
# 1. åˆ›å»ºCA
certica create-ca --name etcd-ca

# 2. ç­¾å‘æœåŠ¡å™¨è¯ä¹¦
certica sign --ca etcd-ca --name etcd-server \
    --type server --dns etcd.local --dns etcd-0.etcd.local \
    --ip 10.0.0.1 --ip 10.0.0.2

# 3. ç­¾å‘å®¢æˆ·ç«¯è¯ä¹¦
certica sign --ca etcd-ca --name etcd-client --type client
```

### åœºæ™¯3: ä½¿ç”¨æ¨¡æ¿

```bash
# 1. åˆ›å»ºæ¨¡æ¿
certica create-template --name myorg \
    --org "My Organization" --country CN

# 2. ä½¿ç”¨æ¨¡æ¿åˆ›å»ºCA
certica create-ca --template myorg --name myca

# 3. ä½¿ç”¨æ¨¡æ¿ç­¾å‘è¯ä¹¦
certica sign --ca myca --name server1 \
    --template myorg --type server --dns server1.example.com
```

## æ–‡ä»¶ä½ç½®

æ‰€æœ‰ç”Ÿæˆçš„æ–‡ä»¶éƒ½åœ¨ `output/` ç›®å½•ï¼Œ**æŒ‰CAè‡ªåŠ¨ç»„ç»‡**ï¼š

```
output/
â”œâ”€â”€ ca/                    # æ ¹CAè¯ä¹¦ï¼ˆæ¯ä¸ªCAä¸€ä¸ªç›®å½•ï¼‰
â”‚   â””â”€â”€ {ca_name}/
â”‚       â”œâ”€â”€ {ca_name}.key.pem
â”‚       â””â”€â”€ {ca_name}.cert.pem
â”œâ”€â”€ certs/                 # ç­¾å‘çš„è¯ä¹¦ï¼ˆæŒ‰CAç»„ç»‡ï¼‰
â”‚   â””â”€â”€ {ca_name}/
â”‚       â””â”€â”€ {cert_name}/
â”‚           â”œâ”€â”€ key.pem
â”‚           â””â”€â”€ cert.pem
â””â”€â”€ templates/             # æ¨¡æ¿æ–‡ä»¶
    â””â”€â”€ *.json
```

**é‡è¦æç¤ºï¼š**
- ä¸åŒCAçš„è¯ä¹¦è‡ªåŠ¨åˆ†å¼€å­˜å‚¨ï¼Œä¸ä¼šæ··æ·†
- ä»ç›®å½•ç»“æ„å°±èƒ½çœ‹å‡ºè¯ä¹¦çš„å½’å±å…³ç³»
- æ˜¾ç¤ºè·¯å¾„æ—¶ä¼šè‡ªåŠ¨å»æ‰ `output/` å‰ç¼€ï¼Œæ›´ç®€æ´

## è·¯å¾„æ˜¾ç¤ºè¯´æ˜

å·¥å…·ä¼šè‡ªåŠ¨ç®€åŒ–è·¯å¾„æ˜¾ç¤ºï¼š

**å®é™…å­˜å‚¨ï¼š** `/path/to/output/ca/myca/myca.key.pem`  
**æ˜¾ç¤ºä¸ºï¼š** `ca/myca/myca.key.pem`

## å¸®åŠ©ä¿¡æ¯

æŸ¥çœ‹æ‰€æœ‰å‘½ä»¤ï¼š
```bash
certica --help
```

æŸ¥çœ‹å…·ä½“å‘½ä»¤å¸®åŠ©ï¼š
```bash
certica create-ca --help
certica sign --help
certica list-certs --help
```

## äº¤äº’å¼ç•Œé¢ç¤ºä¾‹

å¯åŠ¨äº¤äº’å¼ç•Œé¢åï¼Œä½ ä¼šçœ‹åˆ°ï¼š

```
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ ğŸ”’ CAè¯ä¹¦å·¥å…· â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚ 0  âŒ é€€å‡º                                                                   â”‚
â”‚ 1  ğŸ” åˆ›å»ºæ ¹CAè¯ä¹¦                                                           â”‚
â”‚ 2  ğŸ“œ ç­¾å‘è¯ä¹¦ï¼ˆæœåŠ¡å™¨/å®¢æˆ·ç«¯ï¼‰                                              â”‚
â”‚ 3  ğŸ“‹ åˆ—å‡ºæ‰€æœ‰CAè¯ä¹¦                                                         â”‚
â”‚ 4  ğŸ“‘ åˆ—å‡ºå·²ç­¾å‘çš„è¯ä¹¦ï¼ˆæŒ‰CAç­›é€‰ï¼‰                                           â”‚
â”‚ 5  ğŸ“ ç®¡ç†æ¨¡æ¿æ–‡ä»¶                                                           â”‚
â”‚ 6  ğŸ”§ å®‰è£…CAè¯ä¹¦åˆ°ç³»ç»Ÿ                                                       â”‚
â”‚ 7  ğŸ—‘ï¸  ä»ç³»ç»Ÿç§»é™¤CAè¯ä¹¦                                                       â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

è¯·é€‰æ‹©æ“ä½œ (0):
```

é€‰æ‹©æ“ä½œåï¼Œå·¥å…·ä¼šå¼•å¯¼ä½ å®Œæˆåç»­æ­¥éª¤ã€‚

## æç¤º

- ğŸ’¡ **æ–°æ‰‹æ¨è**ï¼šä½¿ç”¨äº¤äº’å¼ç•Œé¢ï¼Œæ“ä½œæ›´ç›´è§‚
- ğŸ’¡ **è‡ªåŠ¨åŒ–è„šæœ¬**ï¼šä½¿ç”¨å‘½ä»¤è¡Œæ¨¡å¼ï¼Œä¾¿äºé›†æˆ
- ğŸ’¡ **å¤šCAç®¡ç†**ï¼šæ¯ä¸ªCAç‹¬ç«‹ç›®å½•ï¼Œäº’ä¸å¹²æ‰°
- ğŸ’¡ **è·¯å¾„ç®€æ´**ï¼šæ˜¾ç¤ºæ—¶è‡ªåŠ¨ç®€åŒ–ï¼Œæ›´æ˜“è¯»
